(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{1:function(e,t,n){e.exports={field:"field_field__ZYsVG",cell:"field_cell__30Y6X",item:"field_item__2NMY8",hidden:"field_hidden__uZkJA",circle:"field_circle__3WBZY",controls:"field_controls__5cEPM",clear_button:"field_clear_button__2WEHu",export_button:"field_export_button__eB4I3",import_label:"field_import_label__3zkyZ",import_input:"field_import_input__3-aLR"}},10:function(e,t,n){e.exports={canvas:"canvas_canvas__37gIx",item:"canvas_item__VevbL",circle:"canvas_circle__2zge0"}},21:function(e,t,n){e.exports=n(34)},26:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var i,a,r=n(0),o=n.n(r),c=n(9),l=n.n(c),s=(n(26),n(6)),u=n(5),f=n(3),d=n.n(f),v=n(1),m=n.n(v),p=n(2);!function(e){e[e.Square=0]="Square",e[e.Circle=1]="Circle"}(i||(i={})),function(e){e[e.ADD_FIGURE=0]="ADD_FIGURE",e[e.REMOVE_FIGURE=1]="REMOVE_FIGURE",e[e.CHANGE_FIGURE=2]="CHANGE_FIGURE"}(a||(a={}));var y=n(8);function _(e){return{type:a.ADD_FIGURE,payload:e}}function E(e){return{type:a.REMOVE_FIGURE,payload:e}}function w(e){return{type:a.CHANGE_FIGURE,payload:e}}var x=Object(y.b)({figures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=localStorage.getItem("figures"),i=n?JSON.parse(n):[];switch(t.type){case a.ADD_FIGURE:i=e.concat(t.payload);break;case a.REMOVE_FIGURE:i=e.filter((function(e){return e.id!==t.payload}));break;case a.CHANGE_FIGURE:var r=Object(u.a)(e);r.forEach((function(n,i){n.id===t.payload.id&&(e[i]=t.payload)})),i=r}return localStorage.setItem("figures",JSON.stringify(i)),i}});var b=n(17),g=n.n(b),h=999,N=1,O=200,I="4px solid #00000066",R=n(18),A=n.n(R),j=function(e){var t=e.map((function(e){return e.layer})).sort((function(e,t){return t-e}))[0]+1;return t||0},k=function(e,t){return e.filter((function(e){return e.id===t}))[0]},G=n(19),D=n.n(G),L=function(){var e=Object(r.useRef)(null),t=null,n=i.Square,a={x:0,y:0},c={x:0,y:0},l=Object(p.b)(),f=Object(p.c)((function(e){return e.figures})),v=function(e){e.preventDefault(),t&&(t.style.left="".concat(e.clientX-a.x,"px"),t.style.top="".concat(e.clientY-a.y,"px"))},y=function(e,i){window.addEventListener("mousemove",(function(e){return v(e)})),window.addEventListener("mouseup",(function(e){return function e(i){t&&(i.clientX>O+c.x&&i.clientX<window.innerWidth-c.x&&i.clientY>c.y&&i.clientY<window.innerHeight-c.y&&l(_({id:g()(),type:n,position:{x:i.clientX-c.x,y:i.clientY-c.y},layer:j(f),color:A()(),isActive:!1})),t.style.zIndex="".concat(N),t.style.left="0",t.style.top="0"),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",e),t=null}(e)})),n=i;var r=e.target;if(r){var o=r.getBoundingClientRect();a.x=e.clientX,a.y=e.clientY,c.x=a.x-o.x,c.y=a.y-o.y,r.style.zIndex="".concat(h),t||(t=r)}},w=function(){var e,t=Object(u.a)(f),n=Object(s.a)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;l(E(i.id))}}catch(a){n.e(a)}finally{n.f()}};return o.a.createElement("section",{className:m.a.field},o.a.createElement("ul",null,o.a.createElement("li",{className:m.a.cell},o.a.createElement("div",{className:d()(m.a.item,m.a.square,m.a.hidden)}),o.a.createElement("div",{onMouseDown:function(e){return y(e,i.Square)},className:d()(m.a.item,m.a.square)})),o.a.createElement("li",{className:m.a.cell},o.a.createElement("div",{className:d()(m.a.item,m.a.circle,m.a.hidden)}),o.a.createElement("div",{onMouseDown:function(e){return y(e,i.Circle)},className:d()(m.a.item,m.a.circle)}))),o.a.createElement("ul",{className:m.a.controls},o.a.createElement("input",{className:m.a.import_input,id:"import_input",type:"file",ref:e,onChange:function(){if(e.current){var t=e.current.files;if(t){var n=new FileReader;n.addEventListener("load",(function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result,i=JSON.parse(n);w();var a,r=Object(s.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value;l(_(o))}}catch(c){r.e(c)}finally{r.f()}})),n.readAsText(t[0])}}}}),o.a.createElement("li",{className:m.a.clear_button,onClick:function(){window.confirm("Are you sure?")&&w()},title:"Delete all elements"}),o.a.createElement("li",{className:m.a.export_button,onClick:function(){var e=JSON.stringify(f),t=new Blob([e],{type:"text/plain;charset=utf-8"});D.a.saveAs(t,"kanva.json")},title:"Export file"}),o.a.createElement("li",{title:"Import file"},o.a.createElement("label",{className:m.a.import_label,htmlFor:"import_input"}))))},Y=n(20),C=n(10),F=n.n(C),S=function(){var e=0,t=null,n={x:0,y:0},a={x:0,y:0},c=Object(p.b)(),l=Object(p.c)((function(e){return e.figures})),f=Object(r.useState)([]),v=Object(Y.a)(f,2),m=v[0],y=v[1],_=function(e){if("Delete"===e.key){var t=function(e){return e.filter((function(e){return!0===e.isActive}))[0]}(l);t&&c(E(t.id))}};Object(r.useEffect)((function(){return document.addEventListener("keydown",_,!1),y(l.map((function(e){var t=e.type===i.Square?"square":"circle",n={left:e.position.x-O,top:e.position.y,zIndex:e.layer,backgroundColor:e.color,border:e.isActive?I:""};return o.a.createElement("div",{id:e.id,key:e.id,className:d()(F.a.item,F.a[t]),style:n,onMouseDown:function(e){return R(e)},onClick:function(e){return b(e)}})}))),function(){return document.removeEventListener("keydown",_,!1)}}),[l]);var x=function(){var e,t=Object(u.a)(l),n=Object(s.a)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.isActive=!1,c(w(i))}}catch(a){n.e(a)}finally{n.f()}},b=function(e){var t=e.target,n=k(l,t.id);n.isActive=!0,c(w(n))},g=function(e){if(e.preventDefault(),t){var n=O+t.offsetWidth,i=t.offsetHeight;t.style.left="".concat(e.clientX-a.x-O,"px"),t.style.top="".concat(e.clientY-a.y,"px"),e.clientX>=O&&e.clientX<=window.innerWidth&&e.clientY>=0&&e.clientY<=window.innerHeight&&(t.offsetLeft<0&&(t.style.left="0"),t.offsetTop<0&&(t.style.top="0"),t.offsetLeft>window.innerWidth-n&&(t.style.left="".concat(window.innerWidth-n,"px")),t.offsetTop>window.innerHeight-i&&(t.style.top="".concat(window.innerHeight-i,"px")))}},N=function n(i){window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",n);var a=i.target;a.style.zIndex="".concat(e);var r=k(l,a.id);r&&(r.position={x:a.offsetLeft+O,y:a.offsetTop},c(w(r))),t&&(i.clientX<O||i.clientX>window.innerWidth||i.clientY<0||i.clientY>window.innerHeight)&&c(E(t.id)),t=null},R=function(i){i.stopPropagation(),x(),window.addEventListener("mousemove",g),window.addEventListener("mouseup",N);var r=i.target;if(r){var o=r.getBoundingClientRect();n.x=i.clientX,n.y=i.clientY,a.x=n.x-o.x,a.y=n.y-o.y,e=j(l);var s=k(l,r.id);s.layer=e,s.isActive=!0,c(w(s)),r.style.zIndex="".concat(h),t||(t=r)}};return o.a.createElement("section",{className:F.a.canvas,onMouseDown:x},m)};var U=function(){return o.a.createElement("div",{className:"app"},o.a.createElement(L,null),o.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=Object(y.c)(x,void 0);l.a.render(o.a.createElement(p.a,{store:X},o.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.411ea0e7.chunk.js.map